# åˆ«å†é—®æˆ‘ Render Props äº†

## ä»€ä¹ˆæ˜¯ Render Props

ç®€è€Œè¨€ä¹‹ï¼Œåªè¦ä¸€ä¸ªç»„ä»¶ä¸­æŸä¸ªå±æ€§çš„å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´æ”¹ç»„ä»¶ä½¿ç”¨äº† Render Props è¿™ç§æŠ€æœ¯ã€‚å¬èµ·æ¥å¥½åƒå°±é‚£ä¹ˆå›äº‹å„¿ï¼Œé‚£åˆ°åº• Render Props æœ‰å“ªäº›åº”ç”¨åœºæ™¯å‘¢ï¼Œè®©æˆ‘ä»¬è¿˜æ˜¯ä»ç®€å•çš„ä¾‹å­è®²èµ·ï¼Œå‡å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ‰“æ‹›å‘¼çš„ç»„ä»¶ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šè¿™ä¹ˆå®ç°ï¼š

```js
const Greeting = props => (
    <div>
        <h1>{props.text}</h1>
    </div>
);

// ç„¶åè¿™ä¹ˆä½¿ç”¨
<Greeting text="Hello ğŸŒ°ï¼" />
```

ä½†æ˜¯å¦‚æœåœ¨æ‰“æ‹›å‘¼çš„æ—¶å€™åŒæ—¶è¿˜éœ€è¦å‘é€ä¸€ä¸ªè¡¨æƒ…å‘¢ï¼Œç„¶åå¯èƒ½ä¼šè¿™ä¹ˆå®ç°ï¼š

```js
const Greeting = props => (
    <div>
        <h1>{props.text}</h1>
        <p>{props.emoji}</p>
    </div>
);
// how to use
<Greeting text="Hello ğŸŒ°ï¼" emoji="ğŸ˜³" />
```

ç„¶åå¦‚æœè¿˜è¦åŠ ä¸Šé“¾æ¥å‘¢ï¼Œåˆè¦åœ¨ `Greeting` ç»„ä»¶çš„å†…éƒ¨å®ç°å‘é€é“¾æ¥çš„é€»è¾‘ï¼Œå¾ˆæ˜æ˜¾è¿™ç§æ–¹å¼è¿èƒŒäº†è½¯ä»¶å¼€å‘å…­å¤§åŸåˆ™ä¹‹ä¸€çš„ **å¼€é—­åŸåˆ™**ï¼Œå³æ¯æ¬¡ä¿®æ”¹éƒ½è¦åˆ°ç»„ä»¶å†…éƒ¨éœ€ä¿®æ”¹ã€‚

> å¼€é—­åŸåˆ™ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‹“å±•å¼€æ”¾ã€‚

é‚£æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥é¿å…è¿™ç§æ–¹å¼çš„ä¿®æ”¹å‘¢ï¼Œå½“ç„¶æœ‰ï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥è¦è®²çš„ **Render Props**ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„æ±‚å’Œå‡½æ•°ï¼š

```js
const sumOf = array => {
    const sum = array.reduce((prev, current) => {
        prev += current;
        return prev;
    }, 0);
    console.log(sum);
}
```

è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œå¯¹æ•°ç»„æ±‚å’Œå¹¶æ‰“å°å®ƒã€‚ä½†æ˜¯å¦‚æœéœ€è¦æŠŠ `sum` é€šè¿‡ `alert` æ˜¾ç¤ºå‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯åˆè¦åˆ° `sumOf` å†…éƒ¨å»ä¿®æ”¹å‘¢ï¼Œå’Œä¸Šé¢çš„ `Greeting` ç±»ä¼¼ï¼Œæ˜¯çš„ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å­˜åœ¨ç›¸åŒçš„é—®é¢˜ï¼Œå°±æ˜¯å½“éœ€æ±‚æœ‰å˜æ˜¯ï¼Œéƒ½éœ€è¦è¦å‡½æ•°å†…éƒ¨å»ä¿®æ”¹ã€‚

å¯¹äºç¬¬äºŒä¸ªå‡½æ•°ï¼Œä½ å¯èƒ½å¾ˆå¿«å°±èƒ½æƒ³å‡ºç”¨ **å›è°ƒå‡½æ•°** å»è§£å†³ï¼š

```js
const sumOf = (array, done) => {
    const sum = array.reduce((prev, current) => {
        prev += current;
        return prev;
    }, 0);
    done(sum);
}

sumOf([1, 2, 3], sum => {
    console.log(sum);
    // or
    alert(sum);
})
```

ä¼šå‘ç°å›è°ƒå‡½æ•°å¾ˆå®Œç¾çš„è§£å†³äº†ä¹‹å‰å­˜åœ¨çš„é—®é¢˜ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ `sumOf` å‡½æ•°çš„å›è°ƒå‡½æ•°ä¸­å»ä¿®æ”¹ï¼Œè€Œä¸éœ€è¦åˆ° `sumOf` å†…éƒ¨å»ä¿®æ”¹ã€‚

åè§‚ React ç»„ä»¶ `Greeting`ï¼Œè¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œå…¶å®å’Œ `sumOf` çš„å›è°ƒå‡½æ•°ä¸€æ ·ï¼š

```js
const Greeting = props => {
    return props.render(props);
};
// how to use
<Greeting
    text="Hello ğŸŒ°ï¼"
    emoji="ğŸ˜³"
    link="link here"
    render={(props) => (
    <div>
        <h1>{props.text}</h1>
        <p>{props.emoji}</p>
        <a href={props.link}></a>
    </div>
)}></Greeting>
```

ç±»æ¯”ä¹‹å‰çš„ `sumOf` æ˜¯ä¸æ˜¯éå¸¸çš„ç›¸ä¼¼ï¼Œç®€ç›´å°±æ˜¯ä¸€æ¯›ä¸€æ ·ï¼š

- `sumOf` ä¸­é€šè¿‡æ‰§è¡Œå›è°ƒå‡½æ•° `done` å¹¶æŠŠ `sum` ä¼ å…¥å…¶ä¸­ï¼Œæ­¤æ—¶åªè¦åœ¨ `sumOf` å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°å³å¯è·å¾— `sum` çš„å€¼ï¼Œè¿›è€Œåšä¸€å†™å®šåˆ¶åŒ–çš„éœ€æ±‚
- `Greeting` ä¸­é€šè¿‡æ‰§è¡Œå›è°ƒå‡½æ•° `props.render` å¹¶æŠŠ `props` ä¼ å…¥å…¶ä¸­ï¼Œæ­¤æ—¶åªè¦åœ¨ `Greeting` ç»„ä»¶çš„ `render` å±æ€§ä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°å³å¯è·å¾— `props` çš„å€¼å¹¶è¿”å›ä½ æ‰€éœ€è¦çš„ UI

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¹¶ä¸æ˜¯åªæœ‰åœ¨ `render` å±æ€§ä¸­ä¼ å…¥å‡½æ•°æ‰èƒ½å« Render Propsï¼Œå®é™…ä¸Šä»»ä½•å±æ€§åªè¦å®ƒçš„å€¼æ˜¯å‡½æ•°ï¼Œéƒ½å¯ç§°ä¹‹ä¸º Render Propsï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­æŠŠ `render` å±æ€§åæ”¹æˆ `children` çš„è¯ä½¿ç”¨ä¸Šå…¶å®æ›´ä¸ºç®€ä¾¿ï¼š

```js
const Greeting = props => {
    return props.children(props);
};
// how to use
<Greeting text="Hello ğŸŒ°ï¼" emoji="ğŸ˜³" link="link here">
{(props) => (
    <div>
        <h1>{props.text}</h1>
        <p>{props.emoji}</p>
        <a href={props.link}></a>
    </div>
)}
</Greeting>
```

è¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨ `Greeting` æ ‡ç­¾å†…å†™å‡½æ•°äº†ï¼Œæ¯”èµ·ä¹‹å‰åœ¨ `render` ä¸­æ›´ä¸ºç›´è§‚ã€‚

æ‰€ä»¥ï¼Œ**React ä¸­çš„ Render Props ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆ JavaScript ä¸­çš„å›è°ƒå‡½æ•°**ã€‚

## Render Props çš„åº”ç”¨

ä¸Šé¢ç®€å•ä»‹ç»äº†ä»€ä¹ˆæ˜¯ Render Propsï¼Œé‚£ä¹ˆåœ¨å®é™…å¼€å‘ä¸­ Render Props å…·ä½“æœ‰ä»€ä¹ˆå®é™…åº”ç”¨å‘¢ã€‚

ç®€å•å®ç°ä¸€ä¸ªã€Œå¼€å…³ã€åŠŸèƒ½çš„ç»„ä»¶ï¼š

```js
class Switch extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            on: props.initialState || false,
        };
    }
    toggle() {
        this.setState({
            on: !this.state.on,
        });
    }
    render() {
        return (
            <div>{this.props.children({
                on,
                toggle: this.toggle,
            })}</div>
        );
    }
}
// how to use
const App = () => (
    <Switch initialState={false}>{({on, toggle}) => {
        <Button onClick={toggle}>Show Modal</Button>
        <Modal visible={on} onSure={toggle}></Modal>
    }}</Switch>
);
```

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ **å¤ç”¨æ˜¾éšæ¨¡æ€å¼¹çª—é€»è¾‘** çš„ç»„ä»¶ï¼Œæ¯”å¦‚è¦æ˜¾ç¤º `OtherModal` å°±ç›´æ¥æ›¿æ¢ `Modal` å°±è¡Œäº†ï¼Œè¾¾åˆ°å¤ç”¨ã€Œå¼€å…³ã€é€»è¾‘ä»£ç çš„ç›®çš„ã€‚

Render Props æ›´åƒæ˜¯ **æ§åˆ¶åè½¬ï¼ˆIoCï¼‰**ï¼Œå®ƒåªè´Ÿè´£å®šä¹‰æ¥å£æˆ–æ•°æ®å¹¶é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’ç»™ä½ ï¼Œå…·ä½“æ€ä¹ˆä½¿ç”¨è¿™äº›æ¥å£æˆ–è€…æ•°æ®å®Œå…¨å–å†³äºä½ ã€‚